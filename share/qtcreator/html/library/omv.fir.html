

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fir — therompile shield driver (fir == far infrared) &mdash; MicroPython 1.4.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
  

  
    <link rel="top" title="MicroPython 1.4.4 documentation" href="../index.html"/>
        <link rel="up" title="MicroPython libraries" href="index.html"/>
        <link rel="next" title="The OpenMV Cam hardware" href="../openmvcam/hardware/index.html"/>
        <link rel="prev" title="lcd — lcd shield driver" href="omv.lcd.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../openmvcam_index.html" class="icon icon-home"> MicroPython
          

          
            
            <img src="../_static/web-logo-sticky.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/general.html">General information about the openmv cam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/tutorial/index.html">MicroPython tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="micropython.html"><code class="docutils literal"><span class="pre">micropython</span></code> &#8211; access and control MicroPython internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries">Python standard libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#python-micro-libraries">Python micro-libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyb.html"><code class="docutils literal"><span class="pre">pyb</span></code> &#8212; functions related to the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="network.html"><code class="docutils literal"><span class="pre">network</span></code> &#8212; network configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.time.html"><code class="docutils literal"><span class="pre">time</span></code> &#8212; tracking elapsed time</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.sensor.html"><code class="docutils literal"><span class="pre">sensor</span></code> &#8212; camera sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html"><code class="docutils literal"><span class="pre">image</span></code> &#8212; machine vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-haarcascade-feature-descriptor">class HaarCascade &#8211; Feature Descriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-image-image-object">class Image &#8211; Image object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html"><code class="docutils literal"><span class="pre">gif</span></code> &#8212; gif recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html#class-gif-gif-recorder">class Gif &#8211; Gif recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html"><code class="docutils literal"><span class="pre">mjpeg</span></code> &#8212; mjpeg recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html#class-mjpeg-mjpeg-recorder">class Mjpeg &#8211; Mjpeg recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.lcd.html"><code class="docutils literal"><span class="pre">lcd</span></code> &#8212; lcd shield driver</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">fir</span></code> &#8212; therompile shield driver (fir == far infrared)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/hardware/index.html">The OpenMV Cam hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/hardware/index.html#datasheets-for-the-components-on-the-openmv-cam">Datasheets for the components on the OpenMV Cam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/hardware/index.html#datasheets-for-other-components">Datasheets for other components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../openmvcam_contents.html">MicroPython documentation contents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/general.html">General information about the openmv cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/tutorial/index.html">MicroPython tutorial</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="micropython.html"><code class="docutils literal"><span class="pre">micropython</span></code> &#8211; access and control MicroPython internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#python-standard-libraries">Python standard libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#python-micro-libraries">Python micro-libraries</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pyb.html"><code class="docutils literal"><span class="pre">pyb</span></code> &#8212; functions related to the board</a></li>
<li class="toctree-l4"><a class="reference internal" href="network.html"><code class="docutils literal"><span class="pre">network</span></code> &#8212; network configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.time.html"><code class="docutils literal"><span class="pre">time</span></code> &#8212; tracking elapsed time</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.sensor.html"><code class="docutils literal"><span class="pre">sensor</span></code> &#8212; camera sensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.image.html"><code class="docutils literal"><span class="pre">image</span></code> &#8212; machine vision</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.image.html#class-haarcascade-feature-descriptor">class HaarCascade &#8211; Feature Descriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.image.html#class-image-image-object">class Image &#8211; Image object</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.gif.html"><code class="docutils literal"><span class="pre">gif</span></code> &#8212; gif recording</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.gif.html#class-gif-gif-recorder">class Gif &#8211; Gif recorder</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.mjpeg.html"><code class="docutils literal"><span class="pre">mjpeg</span></code> &#8212; mjpeg recording</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.mjpeg.html#class-mjpeg-mjpeg-recorder">class Mjpeg &#8211; Mjpeg recorder</a></li>
<li class="toctree-l4"><a class="reference internal" href="omv.lcd.html"><code class="docutils literal"><span class="pre">lcd</span></code> &#8212; lcd shield driver</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">fir</span></code> &#8212; therompile shield driver (fir == far infrared)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/hardware/index.html">The OpenMV Cam hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/hardware/index.html#datasheets-for-the-components-on-the-openmv-cam">Datasheets for the components on the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openmvcam/hardware/index.html#datasheets-for-other-components">Datasheets for other components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../openmvcam_index.html">MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../openmvcam_index.html">Docs</a> &raquo;</li>
      
          <li><a href="../openmvcam_contents.html">MicroPython documentation contents</a> &raquo;</li>
      
          <li><a href="index.html">MicroPython libraries</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">fir</span></code> &#8212; therompile shield driver (fir == far infrared)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/library/omv.fir.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-fir">
<span id="fir-therompile-shield-driver-fir-far-infrared"></span><h1><a class="reference internal" href="#module-fir" title="fir: therompile shield driver (fir == far infrared)"><code class="xref py py-mod docutils literal"><span class="pre">fir</span></code></a> &#8212; therompile shield driver (fir == far infrared)<a class="headerlink" href="#module-fir" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">fir</span></code> module is used for controlling the therompile shield.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sensor</span><span class="o">,</span> <span class="nn">fir</span>

<span class="c"># Setup camera.</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_pixformat</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">RGB565</span><span class="p">)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_framesize</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">QVGA</span><span class="p">)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">skip_frames</span><span class="p">()</span>
<span class="n">fir</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="c"># Show image.</span>
<span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">snapshot</span><span class="p">()</span>
    <span class="n">ta</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">to_min</span><span class="p">,</span> <span class="n">to_max</span> <span class="o">=</span> <span class="n">fir</span><span class="o">.</span><span class="n">read_ir</span><span class="p">()</span>
    <span class="n">fir</span><span class="o">.</span><span class="n">draw_ir</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ir</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;ambient temperature: </span><span class="si">%0.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">ta</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;min temperature seen: </span><span class="si">%0.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">to_min</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;max temperature seen: </span><span class="si">%0.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">to_max</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="fir.init">
<code class="descclassname">fir.</code><code class="descname">init</code><span class="sig-paren">(</span><em>type=1</em><span class="sig-paren">)</span><a class="headerlink" href="#fir.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes an attached thermopile shield using I/O pins P4 and P5.</p>
<p><code class="docutils literal"><span class="pre">type</span></code> indicates the type of thermopile shield (for future use possibly):</p>
<blockquote>
<div><ul class="simple">
<li>0: None</li>
<li>1: thermopile shield</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="fir.deinit">
<code class="descclassname">fir.</code><code class="descname">deinit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fir.deinit" title="Permalink to this definition">¶</a></dt>
<dd><p>Deinitializes the thermopile shield freeing up I/O pins.</p>
</dd></dl>

<dl class="function">
<dt id="fir.width">
<code class="descclassname">fir.</code><code class="descname">width</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fir.width" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the width (horizontal resolution) of the thermopile shield.</p>
<blockquote>
<div><ul class="simple">
<li>thermopile shield: 16 pixels.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="fir.height">
<code class="descclassname">fir.</code><code class="descname">height</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fir.height" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the height (vertical resolution) of the thermopile shield.</p>
<blockquote>
<div><ul class="simple">
<li>thermopile shield: 4 pixels.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">type():</code></dt>
<dd><p>Returns the type of the thermopile shield (for future use possibly):</p>
<blockquote>
<div><ul class="simple">
<li>0: None</li>
<li>1: thermopile Shield</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">read_ta():</code></dt>
<dd><p>Returns the ambient temperature (i.e. sensor temperature).</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ta</span> <span class="o">=</span> <span class="n">fir</span><span class="o">.</span><span class="n">read_ta</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>The value returned is a float that represents the temperature in Celsius.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">read_ir():</code></dt>
<dd><p>Returns a tuple containing the ambient temperature (i.e. sensor temperature),
the temperature array (width x height), the minimum temperature seen, and
the maximum temperature seen.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ta</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">to_min</span><span class="p">,</span> <span class="n">to_max</span> <span class="o">=</span> <span class="n">fir</span><span class="o">.</span><span class="n">read_ir</span><span class="p">()</span>
</pre></div>
</div>
<p>The values returned are floats that represent the temperature in Celsius.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">draw_ta(image, ta, alpha=128, scale=[-17.7778, 37.7778]):</code></dt>
<dd><p>Draws the ambient temperature on the image using a rainbow table color
conversion.</p>
<p><code class="docutils literal"><span class="pre">alpha</span></code> controls the transparency. 256 for an opaque overlay. 0 for none.</p>
<p><code class="docutils literal"><span class="pre">scale</span></code> controls the rainbow table color conversion. The first number is
the minimum temperature cutoff and the second number is the max. Values
closer to the min are blue and values closer to the max are red.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">draw_ta(image, ir, alpha=128, scale=[auto, auto]):</code></dt>
<dd><p>Draws the temperature array on the image using a rainbow table color
conversion.</p>
<p><code class="docutils literal"><span class="pre">alpha</span></code> controls the transparency. 256 for an opaque overlay. 0 for none.</p>
<p><code class="docutils literal"><span class="pre">scale</span></code> controls the rainbow table color conversion. The first number is
the minimum temperature cutoff and the second number is the max. Values
closer to the min are blue and values closer to the max are red.</p>
<p>The minimum and maximum values in the temperature array are used to scale
the output image automatically unless explicitly overridden.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For best results look at really cold or hot objects.</p>
</div>
</div></blockquote>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../openmvcam/hardware/index.html" class="btn btn-neutral float-right" title="The OpenMV Cam hardware" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="omv.lcd.html" class="btn btn-neutral" title="lcd — lcd shield driver" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Damien P. George.
      Last updated on 02 Jul 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>